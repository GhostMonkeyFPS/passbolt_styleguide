<div id="js_wsp_pwd_browser" class="tableview passbolt_component_password_browser passbolt_view_component_password_browser selection">
	<div class="tableview-header">
		<table>
			<thead>
				<tr>
					<th class="js_grid_column js_grid_column_multipleSelect cell_multipleSelect selections s-cell" data-view-id="1410">
						<div class="input checkbox">
							<input name="select all" value="checkbox-select-all" id="checkbox-select-all" disabled="disabled" type="checkbox">
							<label for="checkbox-select-all">select all</label>
						</div>
					</th>
					<th class="js_grid_column js_grid_column_favorite cell_favorite selections s-cell" data-view-id="1411">
						<a href="#"><i class="icon fav"></i><span class="visuallyhidden">fav</span></a>
          </th>
          
          <th class="js_grid_column js_grid_column_avatar grid_column_avatar grid_column_avatar s1-cell cell_avatar">

          </th>
        
					<th class="js_grid_column js_grid_column_name cell_name m-cell sortable" data-view-id="1412">
						<a href="#">Name</a>
					</th>
					<th class="js_grid_column js_grid_column_username cell_username m-cell sortable" data-view-id="1413">
						<a href="#">Username</a>
					</th>
					<th class="js_grid_column js_grid_column_secret cell_secret m-cell password" data-view-id="1414">
						Password
					</th>
					<th class="js_grid_column js_grid_column_uri cell_uri l-cell sortable" data-view-id="1415">
						<a href="#">URI</a>
					</th>
					<th class="js_grid_column js_grid_column_modified cell_modified m-cell sortable sorted sort-desc" data-view-id="1416">
						<a href="#">Modified</a>
					</th>
					<th class="js_grid_column js_grid_column_owner cell_owner m-cell sortable" data-view-id="1417">
						<a href="#">Owner</a>
					</th>
				</tr>
			</thead>
		</table>
	</div>
	<div class="tableview-content scroll">
		<table>
			<tbody>
			<tr class="selected" id="17c66127-0c5e-3510-a497-2e6a105109db" data-view-id="1419">

				<td class="js_grid_column_multipleSelect cell_multipleSelect selections s-cell" data-view-id="1420">
					<div title="" data-view-id="1421"><div class="mad_form_checkbox js_checkbox_multiple_select mad_view_form_checkbox ready" id="multiple_select_checkbox_17c66127-0c5e-3510-a497-2e6a105109db">
							<div class="input checkbox">
								<input value="17c66127-0c5e-3510-a497-2e6a105109db" id="checkbox2a18191d-288c-821d-e7c3-6e464f33564c" data-view-id="1436" type="checkbox" checked>
								<label for="checkbox2a18191d-288c-821d-e7c3-6e464f33564c" data-view-id="1437"></label>
							</div>

						</div></div>
				</td>

				<td class="js_grid_column_favorite cell_favorite selections s-cell" data-view-id="1422">
					<div title="" data-view-id="1423"><div class="passbolt_component_favorite js_component passbolt_view_component_favorite ready" id="favorite_17c66127-0c5e-3510-a497-2e6a105109db"><a href="#" class="">
								<i class="icon fav" data-view-id="1438"></i>
								<span class="visuallyhidden">fav</span>
							</a>
						</div></div>
        </td>
        <td class="js_grid_column_avatar grid_column_avatar grid_column_avatar s1-cell cell_avatar">
					<div title="">
            <span class="svg-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></svg>
            </span>
					</div>
				</td>
				<td class="js_grid_column_name cell_name m-cell" data-view-id="1424">
					<div title="Plants" data-view-id="1425">
						Plants
					</div>
				</td>

				<td class="js_grid_column_username cell_username m-cell" data-view-id="1426">
					<div title="vector" data-view-id="1427">
					</div>
				</td>

				<td class="js_grid_column_secret cell_secret m-cell password" data-view-id="1428">
					<div title="" data-view-id="1429"></div>
				</td>

				<td class="js_grid_column_uri cell_uri l-cell" data-view-id="1430">
					<div title="" data-view-id="1431">
					</div>
				</td>

				<td class="js_grid_column_modified cell_modified m-cell" data-view-id="1432">
					<div title="a day ago" data-view-id="1433">
						a day ago
					</div>
				</td>

				<td class="js_grid_column_owner cell_owner m-cell" data-view-id="1434">
					<div title="edith@passbolt.com" data-view-id="1435">
						edith@passbolt.com
					</div>
				</td>

      </tr>
      <tr class="" id="17c66127-0c5e-3510-a497-2e6a105109db" data-view-id="1419">

				<td class="js_grid_column_multipleSelect cell_multipleSelect selections s-cell" data-view-id="1420">
					<div title="" data-view-id="1421"><div class="mad_form_checkbox js_checkbox_multiple_select mad_view_form_checkbox ready" id="multiple_select_checkbox_17c66127-0c5e-3510-a497-2e6a105109db">
							<div class="input checkbox">
								<input value="17c66127-0c5e-3510-a497-2e6a105109db" id="checkbox2a18191d-288c-821d-e7c3-6e464f33564c" data-view-id="1436" type="checkbox" >
								<label for="checkbox2a18191d-288c-821d-e7c3-6e464f33564c" data-view-id="1437"></label>
							</div>

						</div></div>
				</td>

				<td class="js_grid_column_favorite cell_favorite selections s-cell" data-view-id="1422">
					<div title="" data-view-id="1423"><div class="passbolt_component_favorite js_component passbolt_view_component_favorite ready" id="favorite_17c66127-0c5e-3510-a497-2e6a105109db"><a href="#" class="">
								<i class="icon fav" data-view-id="1438"></i>
								<span class="visuallyhidden">fav</span>
							</a>
						</div></div>
        </td>
        <td class="js_grid_column_avatar grid_column_avatar grid_column_avatar s1-cell cell_avatar">
					<div title="">
            <span class="svg-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></svg>
            </span>
					</div>
				</td>
				<td class="js_grid_column_name cell_name m-cell" data-view-id="1424">
					<div title="Plants" data-view-id="1425">
						Beta
					</div>
				</td>

				<td class="js_grid_column_username cell_username m-cell" data-view-id="1426">
					<div title="vector" data-view-id="1427">
					</div>
				</td>

				<td class="js_grid_column_secret cell_secret m-cell password" data-view-id="1428">
					<div title="" data-view-id="1429"></div>
				</td>

				<td class="js_grid_column_uri cell_uri l-cell" data-view-id="1430">
					<div title="" data-view-id="1431">
					</div>
				</td>

				<td class="js_grid_column_modified cell_modified m-cell" data-view-id="1432">
					<div title="a day ago" data-view-id="1433">
						a day ago
					</div>
				</td>

				<td class="js_grid_column_owner cell_owner m-cell" data-view-id="1434">
					<div title="edith@passbolt.com" data-view-id="1435">
						edith@passbolt.com
					</div>
				</td>

      </tr>
     </tbody>
		</table>
	</div>
</div>

<script type="application/javascript">
    // DEMO ONLY -- not for production use
    $(function() {
      const draggableElements = $('.tableview-content tr');
      draggableElements.draggable({
        cursor: "move",
        appendTo: "body",
        helper: function() {
          let content = $(this).find('td.cell_name')[0].innerText;
          let helper = $("<div>", {
            class: "passwords-folders-dnd-helper"
          });
          if ($(event.target).closest('table').find('input:checkbox:checked').length > 1) {
            helper = $("<div>", {
            class: "passwords-folders-dnd-helper-with-shadow"
          });
          }
          helper.append(`<span>${content}</span>`);
          return helper;
        },
        start: function (event, ui) {
          $(event.target).addClass('selected');
          $(event.target).find('input:checkbox').attr('checked', 'checked');
        },
        cursorAt: {
          top: 5,
          left: 5
        },
        opacity: "0.7",
        revert:  function(dropped) {
          let draggable = $(this);
          draggable.removeClass('selected');
          draggable.find('input:checkbox').removeAttr('checked');
          draggable.closest('table').find('tr.selected').removeClass('selected');
          draggable.closest('table').find('input:checkbox:checked').removeAttr('checked');
          let hasBeenDroppedBefore = draggable.data('hasBeenDropped');
          if (hasBeenDroppedBefore) {
            draggable.animate({ top: 0, left: 0 }, 'slow');
            return false;
          } else {
            return true;
          }
        }
      });
      
      $('.tableview-content tr').click(function(event){
        if ($(event.target).closest('tr').hasClass('selected')) {
            $(event.target).closest('tr').removeClass('selected');
            $(event.target).closest('tr').find('input:checkbox').removeAttr('checked');
        } else {
            $(event.target).closest('tr').addClass('selected');
            $(event.target).closest('tr').find('input:checkbox').attr('checked', 'checked');
        }
        $('.passbolt_view_component_resource_sidebar').css('display', 'none');

      });

    });
    
    $(".js_grid_column_avatar.grid_column_avatar img").on("error", function(event) {
      $(this).hide();
      const str = $(event.target).closest('tr').find('td.js_grid_column_name')[0].innerText,
      firstname = str.substr(0, str.indexOf(' ')).charAt(0),
      lastname = str.substr(str.lastIndexOf(' ') + 1).charAt(0),
      color = getColor((str.length) % 10);
      let getLabel = `${firstname}${lastname}`;
      let labelName = getLabel.toUpperCase();
      $(event.target).closest('tr').find('.js_grid_column_avatar.grid_column_avatar div').css({'background': color}).addClass('text-label').text(labelName);
    });
    function getColor(index) {
      const colorsArray = ['dc4242', '4990e2', '4ad4b6', 'da3549', 'd5783b', '7d54d6', 'e259a6', '50e3c2', 'db8d5a', 'cee14a'];
      return `#${colorsArray[index]}`;
    };
</script>